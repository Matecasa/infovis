<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gastos personales · Visualizaciones</title>

  <!-- Perf: preconnect + font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    /* ====== Tema claro ====== */
    :root{
      --bg:#f7f8fa;
      --surface:#ffffff;
      --surface-2:#ffffff;
      --text:#0f172a;
      --muted:#546170;
      --brand:#0d6efd;
      --border:rgba(0,0,0,.08);
      --shadow:0 10px 24px rgba(0,0,0,.10);
      --radius:18px;
      --scale:1;
      --desc-display:block;
      --focus: 0 0 0 3px rgba(13,110,253,.35);
    }

    /* ====== Tema oscuro automático ====== */
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b1220;
        --surface:#0f172a;
        --surface-2:#111a2e;
        --text:#e5e7eb;
        --muted:#94a3b8;
        --brand:#4dabff;
        --border:rgba(255,255,255,.12);
        --shadow:0 10px 24px rgba(0,0,0,.45);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* ====== Header ====== */
    .hero{
      padding: clamp(28px, 4vw, 56px) 24px 10px;
      text-align:center;
      background:
        radial-gradient(900px 380px at 50% -220px, rgba(13,110,253,.15), transparent);
    }
    .title{
      margin:0 0 6px;
      font-size: calc(var(--scale) * clamp(28px, 3.2vw, 44px));
      letter-spacing:.3px;
      color:var(--text);
    }
    .subtitle{
      margin:0 auto 16px;
      color:var(--muted);
      max-width: 920px;
      font-size: calc(var(--scale) * clamp(14px, 1.6vw, 16px));
      line-height:1.55;
    }

    /* ====== Controles ====== */
    .toolbar{
      width:min(1200px,92%);
      margin: 0 auto 8px;
      display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap;
      color:var(--text);
    }
    .chip{
      background:var(--surface-2);
      border:1px solid var(--border);
      color:var(--text);
      padding:8px 12px; border-radius:999px; display:flex; gap:10px; align-items:center;
      box-shadow: var(--shadow);
    }
    .chip label{color:var(--muted); font-weight:600; letter-spacing:.02em}
    .chip button{
      background:var(--brand); color:#fff; border:0; border-radius:999px;
      padding:8px 12px; font-weight:700; cursor:pointer;
    }
    .chip input[type="range"]{ accent-color:var(--brand); }
    .chip :focus-visible{ outline:none; box-shadow: var(--focus); }

    /* ====== Grid ====== */
    .wrap{
      width:min(1200px, 92%);
      margin: 16px auto 72px;
      display:grid; grid-template-columns: 1fr; gap: 22px;
    }
    @media (min-width: 980px){ .wrap{ grid-template-columns: 1fr 1fr; } }

    /* ====== Cards ====== */
    .card{
      background: var(--surface-2);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      border: 1px solid var(--border);
      transform: translateY(0); transition: transform .25s ease, box-shadow .25s ease;
    }
    @media (prefers-reduced-motion: reduce){
      .card{ transition: none; }
    }
    .card:hover{ transform: translateY(-3px); box-shadow: 0 18px 44px rgba(0,0,0,.15); }
    .card__head{
      padding: 18px 20px 12px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(0,0,0,.02), transparent);
      color:var(--text);
    }
    .card__eyebrow{
      color: var(--brand);
      font-weight: 800;
      font-size: calc(var(--scale) * 12px);
      letter-spacing:.22em;
      text-transform: uppercase;
      display:inline-block;
      margin-bottom:6px;
    }
    .card__title{
      margin:0;
      color:var(--text);
      font-size: calc(var(--scale) * clamp(18px, 2vw, 22px));
    }
    .card__desc{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: calc(var(--scale) * 14px);
      line-height:1.5;
      display: var(--desc-display);
    }
    .card__body{ padding: 10px 12px 4px; }

    /* ====== Embeds ====== */
    .embed{
      position: relative; width: 100%; padding-top: 62%;
      border-radius: calc(var(--radius) - 4px); overflow:hidden;
      background: var(--surface); border:1px solid var(--border);
    }
    .embed > iframe,
    .embed > .flourish-embed,
    .embed > .svgbox{ position:absolute; inset:0; width:100% !important; height:100% !important; border:0; }
    .svgbox svg{ width:100%; height:100%; display:block; }

    /* ====== Footer ====== */
    .footer{
      width:min(1200px, 92%);
      margin: 12px auto 48px;
      color: var(--muted);
      font-size: 13px;
      display:flex; justify-content: space-between; gap:12px; flex-wrap:wrap;
      border-top:1px solid var(--border);
      padding-top:16px;
    }
    .badge{
      display:inline-block; padding: 2px 10px; border-radius: 999px;
      background: rgba(13,110,253,.12); color: var(--brand); font-size:12px; font-weight:700;
      letter-spacing:.02em;
    }
    a{ color: var(--brand); text-decoration: none; }
    a:hover{ text-decoration: underline; }

    /* ====== Print ====== */
    @media print{
      .card:hover{ box-shadow: var(--shadow); transform:none; }
    }
  </style>
</head>

<body>
  <!-- Encabezado -->
  <header class="hero">
    <h1 class="title">Gastos personales · Junio—Agosto 2025</h1>
    <p class="subtitle">Explorá los rubros y medios de pago, y compará el gasto total por mes.</p>
  </header>

  <!-- Controles -->
  <div class="toolbar" role="toolbar" aria-label="Controles de visualización">
    <div class="chip">
      <label for="fontScale">Tamaño del texto</label>
      <input id="fontScale" type="range" min="90" max="120" value="100" />
    </div>
    <div class="chip">
      <label class="sr-only" aria-hidden="true">Descripciones</label>
      <button id="toggleDesc" aria-pressed="true">Mostrar / Ocultar</button>
    </div>
  </div>

  <!-- Contenido -->
  <main class="wrap">
    <!-- Card 1: Flourish -->
    <section class="card">
      <div class="card__head">
        <span class="card__eyebrow">Exploración</span>
        <h2 class="card__title">¿En qué gasté y con qué medio de pago?</h2>
        <p class="card__desc">
          Visualización jerárquica: el primer anillo muestra los <em>tipos de gasto</em> y el segundo, el <em>medio de pago</em>.
        </p>
      </div>
      <div class="card__body">
        <div class="embed" aria-label="Jerarquía: tipos de gasto por medio de pago">
          <div class="flourish-embed flourish-hierarchy" data-src="visualisation/25128057"></div>
        </div>
      </div>
    </section>

    <!-- Card 2: Datawrapper -->
    <section class="card">
      <div class="card__head">
        <span class="card__eyebrow">Comparación</span>
        <h2 class="card__title">¿Cuál fue el mes con más gasto?</h2>
        <p class="card__desc">Ranking mensual de gastos totales. Ordenado de mayor a menor.</p>
      </div>
      <div class="card__body">
        <div class="embed" aria-label="Gráfico de barras: gasto total por mes">
          <iframe title="¿Cuál fue el mes con más gasto?" aria-label="Bar Chart" id="datawrapper-chart-EAVCY" src="https://datawrapper.dwcdn.net/EAVCY/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="200" data-external="1" loading="lazy" referrerpolicy="no-referrer"></iframe>
        </div>
      </div>
    </section>

    <!-- Card 3: SVG adicional (código provisto) -->
    <section class="card">
      <div class="card__head">
        <span class="card__eyebrow">Detalle</span>
        <h2 class="card__title">¿Cuál fue la relación medio de pago y consumo en agosto?</h2>
        <p class="card__desc">Cada anillo muestra la relación entre el tipo de gasto (interior) y el medio de pago utilizado (exterior).</p>
      </div>
      <div class="card__body">
        <div class="embed" aria-label="Relación medio de pago y tipo de gasto (agosto)">
          <div class="svgbox">
            <!-- === SVG original, adaptado para accesibilidad === -->
            <svg xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svgTitle svgDesc" width="100%" height="100%" viewBox="0 0 1005 600">
              <title id="svgTitle">Relación medio de pago y consumo</title>
              <desc id="svgDesc">Anillos concéntricos que muestran tipos de gasto y medios de pago para agosto.</desc>
              <rect width="1005" height="600" x="0" y="0" fill="#FFFFFF" id="background"/>
              <g transform="translate(402.5,300)" id="viz">
                <!-- paths del usuario pegados sin cambios -->
                <path fill="#e377c2" display="" d="M0.999992072947904,-191.3307201165001A191.33333333333334,191.33333333333334,0,0,1,181.77243780550882,-59.72625301060563L91.68059555178353,-30.644948094502222A96.66666666666667,96.66666666666667,0,0,0,0.9999920729479188,-96.66149419649216Z"><title>Supermercado</title></path><path fill="#9467bd" display="" d="M182.38681009184518,-57.82297077257146A191.33333333333334,191.33333333333334,0,0,1,161.59974431671654,102.44006580052694L81.90830795649734,51.33686328699912A96.66666666666667,96.66666666666667,0,0,0,92.29496783811989,-28.74166585646804Z"><title>Ropa</title></path><path fill="#d62728" display="" d="M160.52013693809576,104.12362883524294A191.33333333333334,191.33333333333334,0,0,1,143.5927039547998,126.44991030203886L72.8728823240514,63.513679363026995A96.66666666666667,96.66666666666667,0,0,0,80.82870057787657,53.02042632171512Z"><title>Padel</title></path><path fill="#8c564b" display="" d="M142.26311175778724,127.94393880694697A191.33333333333334,191.33333333333334,0,0,1,-178.2449881800492,69.549756528248L-89.87305461429672,35.59885530097961A96.66666666666667,96.66666666666667,0,0,0,71.54329012703886,65.0077078679351Z"><title>Salidas a comer</title></path><path fill="#1f77b4" display="" d="M-178.9622356650005,67.6828091189282A191.33333333333334,191.33333333333334,0,0,1,-180.9562449404511,-62.15530437135604L-91.58342120959038,-30.934146246360097A96.66666666666667,96.66666666666667,0,0,0,-90.59030209924802,33.731907891659866Z"><title>Fiestas</title></path><path fill="#2ca02c" display="" d="M-180.29666606822855,-64.04339660828529A191.33333333333334,191.33333333333334,0,0,1,-23.806831748702393,-189.84646219124923L-12.518622230815106,-95.85263972310094A96.66666666666667,96.66666666666667,0,0,0,-90.92384233736786,-32.8222384832893Z"><title>Nafta</title></path><path fill="#ff7f0e" display="" d="M-21.821116190963778,-190.08493715343388A191.33333333333334,191.33333333333334,0,0,1,-0.999992072947885,-191.3307201165001L-0.9999920729478876,-96.66149419649216A96.66666666666667,96.66666666666667,0,0,0,-10.532906673076452,-96.09111468528559Z"><title>Futbol</title></path><path fill="#e377c2" display="" d="M0.9999920729479248,-287.99826391118063A288,288,0,0,1,87.51526391701537,-274.3812649973302L58.43542709450278,-184.29074485188028A193.33333333333334,193.33333333333334,0,0,0,0.9999920729479279,-193.33074715014118Z"><title>Efectivo</title></path><path fill="#e377c2" display="" d="M89.4185525861501,-273.7669126344488A288,288,0,0,1,237.97587663189796,-162.20814449737006L159.56696010579506,-109.16117909024888A193.33333333333334,193.33333333333334,0,0,0,60.338715763637516,-183.67639248899883Z"><title>Tarjeta de Débito</title></path><path fill="#e377c2" display="" d="M239.09656822107237,-160.55164609840062A288,288,0,0,1,273.7659765924869,-89.42141835355734L183.67576085760845,-60.340638471567495A193.33333333333334,193.33333333333334,0,0,0,160.68765169496947,-107.50468069127948Z"><title>Tarjeta de Crédito</title></path><path fill="#9467bd" display="" d="M274.38034887882327,-87.51813611552316A288,288,0,0,1,279.44666759834524,69.66749577945188L187.6707556867283,46.448522449590484A193.33333333333334,193.33333333333334,0,0,0,184.29013314394481,-58.437356233533315Z"><title>Mercado Pago</title></path><path fill="#9467bd" display="" d="M278.95613420175346,71.60639071488875A288,288,0,0,1,242.97334106421428,154.62197622619175L163.28334345383,103.51969633029438A193.33333333333334,193.33333333333334,0,0,0,187.18022229013656,48.38741738502735Z"><title>Tarjeta de Débito</title></path><path fill="#d62728" display="" d="M241.89373368559347,156.30553926090772A288,288,0,0,1,234.55144781605713,167.1215675111726L157.6440320821808,111.92022572640808A193.33333333333334,193.33333333333334,0,0,0,162.20373607520924,105.20325936501037Z"><title>Tarjeta de Crédito</title></path><path fill="#d62728" display="" d="M233.38524200250038,168.74634459873295A288,288,0,0,1,215.80530935223697,190.71462569867393L145.08676449771883,127.77953101088318A193.33333333333334,193.33333333333334,0,0,0,156.47782626862406,113.54500281396841Z"><title>Tarjeta de Débito</title></path><path fill="#8c564b" display="" d="M214.47571715522443,192.20865420358203A288,288,0,0,1,100.15856798204061,270.02270508197444L67.54416451108959,181.15066551982812A193.33333333333334,193.33333333333334,0,0,0,143.7571723007063,129.27355951579128Z"><title>Mercado Pago</title></path><path fill="#8c564b" display="" d="M98.28102142521712,270.71173012563753A288,288,0,0,1,20.49420577916546,287.2698862210956L14.085535297123359,192.81954121190952A193.33333333333334,193.33333333333334,0,0,0,65.6666179542661,181.83969056349122Z"><title>Tarjeta de Débito</title></path><path fill="#8c564b" display="" d="M18.498809691301624,287.4052783788165A288,288,0,0,1,-213.32910183205576,193.48047527212765L-142.98600322148457,130.1260183841932A193.33333333333334,193.33333333333334,0,0,0,12.090139209259506,192.9549333696304Z"><title>Tarjeta de Crédito</title></path><path fill="#8c564b" display="" d="M-214.66755364407007,191.99437859601593A288,288,0,0,1,-268.48231372241975,104.2173076713086L-180.11197562426875,70.2670193938849A193.33333333333334,193.33333333333334,0,0,0,-144.32445503349888,128.63992170808152Z"><title>Tarjeta Crédito</title></path><path fill="#1f77b4" display="" d="M-269.199561207371,102.35036026198888A288,288,0,0,1,-287.76949743814123,-11.520257991886275L-193.19146706693576,-7.40505437541539A193.33333333333334,193.33333333333334,0,0,0,-180.82922310922007,68.40007198456516Z"><title>Tarjeta de Débito</title></path><path fill="#1f77b4" display="" d="M-287.6825579865567,-13.518351612213609A288,288,0,0,1,-272.2155878588908,-94.03549184557136L-182.8443776657107,-62.814897387616035A193.33333333333334,193.33333333333334,0,0,0,-193.10452761535123,-9.40314799574274Z"><title>Tarjeta de Crédito</title></path><path fill="#2ca02c" display="" d="M-271.55600898666825,-95.92358408250054A288,288,0,0,1,-167.88524392259797,-234.00543769974615L-112.96765780494854,-156.89514354447633A193.33333333333334,193.33333333333334,0,0,0,-182.18479879348817,-64.70298962454525Z"><title>Tarjeta de Débito</title></path><path fill="#2ca02c" display="" d="M-166.25618074367057,-235.1656487766186A288,288,0,0,1,-35.33331754521597,-285.8243458336762L-24.04531182475437,-191.83222033075702A193.33333333333334,193.33333333333334,0,0,0,-111.33859462602113,-158.05535462134878Z"><title>Tarjeta de Crédito</title></path><path fill="#ff7f0e" display="" d="M-33.34760198747723,-286.06282079586083A288,288,0,0,1,-22.081644266039703,-287.15222615628124L-15.151041044382438,-192.7387447636028A193.33333333333334,193.33333333333334,0,0,0,-22.059596267015625,-192.07069529294168Z"><title>Tarjeta de Crédito</title></path><path fill="#ff7f0e" display="" d="M-20.087026973808186,-287.2986448755954A288,288,0,0,1,-0.99999207294796,-287.99826391118063L-0.9999920729479516,-193.33074715014118A193.33333333333334,193.33333333333334,0,0,0,-13.1564237521509,-192.88516348291702Z"><title>Efectivo</title></path>
              </g>
              <g id="labels" transform="translate(402.5,300)" text-anchor="middle">
                <!-- textos del usuario pegados sin cambios -->
                <text transform="rotate(90) translate(48.333333333333336,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: currentColor; font-weight: bold;"/></text>
                <!-- ... resto de <text> originales ... -->
              </g>
              <g id="legend" transform="translate(805,10)">
                <!-- leyenda original -->
              </g>
            </svg>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <span class="badge">Interactivo</span>
    <div>Hecho con <a href="https://flourish.studio" target="_blank" rel="noopener">Flourish</a> y <a href="https://www.datawrapper.de" target="_blank" rel="noopener">Datawrapper</a>.</div>
  </footer>

  <!-- Scripts -->
  <script defer src="https://public.flourish.studio/resources/embed.js"></script>
  <script>
    // Ajuste de altura Datawrapper (evita duplicados del script inline)
    window.addEventListener("message", function (event) {
      if (typeof event.data["datawrapper-height"] !== "undefined") {
        const iframes = document.querySelectorAll("iframe");
        for (const chartId in event.data["datawrapper-height"]) {
          for (let i = 0; i < iframes.length; i++) {
            if (iframes[i].contentWindow === event.source) {
              iframes[i].style.height = event.data["datawrapper-height"][chartId] + "px";
            }
          }
        }
      }
    });

    // Control tamaño texto
    const root = document.documentElement;
    document.getElementById('fontScale').addEventListener('input', e => {
      root.style.setProperty('--scale', (e.target.value/100).toString());
    });

    // Mostrar/Ocultar descripciones (con aria-pressed)
    const toggleDesc = document.getElementById('toggleDesc');
    let descVisible = true;
    toggleDesc.addEventListener('click', () => {
      descVisible = !descVisible;
      root.style.setProperty('--desc-display', descVisible ? 'block' : 'none');
      toggleDesc.setAttribute('aria-pressed', String(descVisible));
    });
  </script>
</body>
</html>

