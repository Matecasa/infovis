<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gastos personales · Visualizaciones</title>

  <!-- Fuente y estilos base -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg: #0b0c10;
      --surface: #111318;
      --text: #e9edf1;
      --muted: #a6b0bb;
      --brand: #58a6ff;
      --card: #151a21;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f7f8fa;
        --surface: #ffffff;
        --text: #0f172a;
        --muted: #566270;
        --brand: #0d6efd;
        --card: #ffffff;
        --shadow: 0 10px 25px rgba(0,0,0,.08);
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
      background:linear-gradient(180deg,var(--bg),#0f1117);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Header */
    .hero{
      padding: clamp(28px, 4vw, 56px) 24px 8px;
      text-align:center;
      background: radial-gradient(1000px 400px at 50% -200px, rgba(88,166,255,.25), transparent),
                  radial-gradient(700px 300px at 90% -120px, rgba(255,255,255,.08), transparent);
    }
    .title{
      margin:0 0 8px;
      font-size: clamp(28px, 3.2vw, 42px);
      letter-spacing:.3px;
    }
    .subtitle{
      margin:0 auto;
      color:var(--muted);
      max-width: 860px;
      font-size: clamp(14px, 1.6vw, 16px);
      line-height:1.55;
    }

    /* Layout */
    .wrap{
      width:min(1200px, 92%);
      margin: 24px auto 72px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 22px;
    }
    @media (min-width: 980px){
      .wrap{ grid-template-columns: 1fr 1fr; }
    }

    /* Cards */
    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.06);
    }
    .card__head{
      padding: 18px 20px 10px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background:
        linear-gradient(180deg, rgba(255,255,255,.03), transparent);
    }
    .card__eyebrow{
      color: var(--brand);
      font-weight: 700;
      font-size: 12px;
      letter-spacing:.2em;
      text-transform: uppercase;
      display:inline-block;
      margin-bottom:6px;
    }
    .card__title{
      margin:0;
      font-size: clamp(18px, 2vw, 22px);
    }
    .card__desc{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 14px;
      line-height:1.5;
    }
    .card__body{ padding: 10px 12px 4px; }

    /* Responsive iframes */
    .embed{
      position: relative;
      width: 100%;
      /* altura adaptable por relación 16:9; puedes ajustar según el gráfico */
      padding-top: 62%;
      border-radius: calc(var(--radius) - 4px);
      overflow:hidden;
    }
    .embed > iframe, .embed > .flourish-embed{
      position:absolute; inset:0;
      width:100% !important; height:100% !important;
      border:0;
    }

    /* Footer */
    .footer{
      width:min(1200px, 92%);
      margin: 12px auto 48px;
      color: var(--muted);
      font-size: 13px;
      display:flex;
      justify-content: space-between;
      gap:12px;
      flex-wrap:wrap;
      border-top:1px solid rgba(255,255,255,.08);
      padding-top:16px;
    }
    .badge{
      display:inline-block;
      padding: 2px 10px;
      border-radius: 999px;
      background: rgba(88,166,255,.12);
      color: var(--brand);
      font-size:12px;
      font-weight:700;
      letter-spacing:.02em;
    }
    a{ color: var(--brand); text-decoration: none; }
    a:hover{ text-decoration: underline; }
  </style>
</head>

<body>
  <!-- Encabezado -->
  <header class="hero">
    <h1 class="title">Gastos personales · Junio—Agosto 2025</h1>
    <p class="subtitle">
      Presentación interactiva con dos visualizaciones: (1) un <strong>diagrama jerárquico</strong> para explorar rubros y medios de pago, y (2) un
      <strong>ranking por mes</strong> ordenado de mayor a menor gasto. Ambas piezas son responsivas y listas para incrustar en GitHub Pages.
    </p>
  </header>

  <!-- Contenido -->
  <main class="wrap">

    <!-- Card 1 · Flourish -->
    <section class="card">
      <div class="card__head">
        <span class="card__eyebrow">Exploración</span>
        <h2 class="card__title">¿En qué gasté y con qué medio de pago?</h2>
        <p class="card__desc">
          Visualización jerárquica: el primer anillo muestra los <em>tipos de gasto</em> (rubro) y el segundo, el <em>medio de pago</em> utilizado.
          El tamaño de cada segmento es proporcional al monto total.
        </p>
      </div>
      <div class="card__body">
        <div class="embed">
          <!-- FLOURISH (usa tu ID actual) -->
          <div class="flourish-embed flourish-hierarchy" data-src="visualisation/25128057"></div>
        </div>
      </div>
    </section>

    <!-- Card 2 · Datawrapper -->
    <section class="card">
      <div class="card__head">
        <span class="card__eyebrow">Comparación</span>
        <h2 class="card__title">¿Cuál fue el mes con más gasto?</h2>
        <p class="card__desc">
          Ranking mensual de gastos totales. Ordenado de mayor a menor para una lectura inmediata.
        </p>
      </div>
      <div class="card__body">
        <div class="embed" style="padding-top: 48%;">
          <!-- DATAWRAPPER (usa tu ID actual) -->
          <iframe
            title="¿Cuál fue el mes que más gasté?"
            id="datawrapper-chart-EAVCY"
            src="https://datawrapper.dwcdn.net/EAVCY/1/"
            scrolling="no"
            frameborder="0"
            data-external="1">
          </iframe>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <span class="badge">Interactivo</span>
    <div>Hecho con <a href="https://flourish.studio" target="_blank" rel="noopener">Flourish</a> y <a href="https://www.datawrapper.de" target="_blank" rel="noopener">Datawrapper</a>. Tipografía Inter.</div>
  </footer>

  <!-- Cargas de scripts (al final para rendimiento) -->
  <script src="https://public.flourish.studio/resources/embed.js" defer></script>
  <script>
    // Auto-ajustar altura de iframes de Datawrapper (script oficial)
    window.addEventListener("message", function (event) {
      if (typeof event.data["datawrapper-height"] !== "undefined") {
        const iframes = document.querySelectorAll("iframe");
        for (const chartId in event.data["datawrapper-height"]) {
          for (let i = 0; i < iframes.length; i++) {
            if (iframes[i].contentWindow === event.source) {
              iframes[i].style.height = event.data["datawrapper-height"][chartId] + "px";
            }
          }
        }
      }
    });
  </script>
</body>
</html>
