<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mis gastos – Tablero responsive</title>
  <meta name="description" content="Página responsive y limpia para embeber gráficos de gastos personales (Flourish, Datawrapper, SVG y Power BI)." />

  <!-- Tipografía del sistema para máxima legibilidad -->
  <style>
    :root{
      --bg: #f7f7fb;           /* Fondo claro como pediste */
      --card: #ffffff;          /* Tarjetas blancas */
      --text: #111111;          /* Texto negro (alto contraste) */
      --muted: #525252;         /* Texto secundario */
      --ring: rgba(17,17,17,.08);
      --shadow: 0 10px 25px rgba(0,0,0,.06);
      --radius: 18px;           /* Esquinas redondeadas suaves */
      --maxw: 1200px;           /* Ancho máximo de la cuadrícula */
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font: 16px/1.55 ui-sans-serif, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      text-rendering: optimizeLegibility;
    }

    /* Cabecera */
    header{
      position: sticky; top: 0; z-index: 20;
      backdrop-filter: saturate(180%) blur(8px);
      background: color-mix(in oklab, var(--bg) 92%, white 8%);
      border-bottom: 1px solid var(--ring);
    }
    .nav{
      max-width: var(--maxw);
      margin: 0 auto; padding: 14px 20px;
      display: flex; align-items: center; gap: 14px; justify-content: space-between;
    }
    .brand{ font-weight: 800; letter-spacing: .2px; }
    .subtitle{ color: var(--muted); font-size: .95rem; }

    /* Layout principal */
    .wrap{ max-width: var(--maxw); margin: 28px auto 60px; padding: 0 20px; }
    .grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
    }
    @media (min-width: 720px){
      .grid{ grid-template-columns: repeat(12, 1fr); }
      .col-6{ grid-column: span 6; }
      .col-12{ grid-column: span 12; }
      .col-8{ grid-column: span 8; }
      .col-4{ grid-column: span 4; }
    }

    /* Tarjetas */
    .card{
      background: var(--card);
      border: 1px solid var(--ring);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .card > .card-hd{ padding: 14px 16px; border-bottom: 1px solid var(--ring); display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .card > .card-hd h2{ margin: 0; font-size: 1rem; font-weight: 700; }
    .card > .card-bd{ padding: 0; }
    .hint{ color: var(--muted); font-size: .9rem; }

    /* Contenedores responsivos para iframes / SVG */
    .embed{
      display: block;
      width: 100%;
      border: 0;
      background: transparent;
    }
    /* Relación de aspecto para iframes genéricos */
    .ratio{ position: relative; width: 100%; }
    .ratio > .embed, .ratio > svg, .ratio > div[data-flourish-embed] iframe{ position: absolute; inset: 0; width: 100%; height: 100%; }
    .ratio-16x9{ padding-top: 56.25%; }
    .ratio-4x3{ padding-top: 75%; }

    /* SVG escalable dentro de tarjeta */
    .svg-wrap{ padding: 14px; }
    .svg-wrap svg{ width: 100%; height: auto; display: block; }

    /* Pie */
    footer{ max-width: var(--maxw); margin: 36px auto 28px; padding: 0 20px; color: var(--muted); font-size: .9rem; }

    /* Botoncitos simples (opcional) */
    .pill{
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid var(--ring);
      background:#fff; text-decoration:none; color:inherit; font-size:.85rem;
    }
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div>
        <div class="brand">Mis gastos personales</div>
        <div class="subtitle">Tablero liviano, responsivo y legible</div>
      </div>
      <nav>
        <a class="pill" href="#fuentes" aria-label="Ir a fuentes">Fuentes</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="grid" aria-label="Gráficos principales">

      <!-- 1) Flourish: jerarquía / sunburst -->
      <article class="card col-6 col-12" aria-labelledby="t1">
        <div class="card-hd">
          <h2 id="t1">Medios de pago y categorías (Flourish)</h2>
          <span class="hint">Interactivo</span>
        </div>
        <div class="card-bd">
          <!-- Flourish embed (tu mismo data-src) -->
          <div class="ratio ratio-4x3">
            <div class="flourish-embed flourish-hierarchy" data-src="visualisation/25147256"></div>
          </div>
        </div>
      </article>

      <!-- 2) Datawrapper: barras -->
      <article class="card col-6 col-12" aria-labelledby="t2">
        <div class="card-hd">
          <h2 id="t2">Gastos totales (Datawrapper)</h2>
          <span class="hint">Se adapta al alto automáticamente</span>
        </div>
        <div class="card-bd">
          <div class="ratio ratio-4x3">
            <iframe
              title="Gastos totales"
              aria-label="Bar Chart"
              id="datawrapper-chart-Ad1jv"
              src="https://datawrapper.dwcdn.net/Ad1jv/1/"
              scrolling="no"
              frameborder="0"
              class="embed"
              data-external="1"></iframe>
          </div>
        </div>
      </article>

      <!-- 3) Tu SVG estático -->
      <article class="card col-12" aria-labelledby="t3">
        <div class="card-hd">
          <h2 id="t3">Distribución detallada (SVG estático)</h2>
          <span class="hint">Escalable sin perder calidad</span>
        </div>
        <div class="card-bd svg-wrap">
          <!-- Pegamos el SVG que compartiste (sin cambios de contenido) -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 805 600" role="img" aria-label="Diagrama SVG de gastos"><rect width="805" height="600" x="0" y="0" fill="#FFFFFF" id="background"/>
            <!-- Recortado por brevedad: conserva todo tu <g> original debajo -->
            <!-- INICIO: CONTENIDO SVG ORIGINAL COMPLETO -->
            <g transform="translate(402.5,300)" id="viz"><path fill="#c2ede4" display="" d="M0.9999920729479259,-142.9965035091909A143,143,0,0,1,52.84361439271072,-132.87796061768293L26.332594771015295,-67.5488301351363A72.5,72.5,0,0,0,0.9999920729479103,-72.49310322957655Z"><title>Efectivo</title></path><path fill="#50e3c2" display="" d="M54.69681898585192,-132.1259171882222A143,143,0,0,1,50.659888995779056,133.725747883253L26.14466721552847,67.62178921168287A72.5,72.5,0,0,0,28.185799364156466,-66.79678670567557Z"><title>Tarjeta de Débito</title></path><path fill="#d0021b" display="" d="M48.78470469545076,134.42117611365282A143,143,0,0,1,-90.99749294318329,110.31072603357893L-45.75370306850015,56.23920923625722A72.5,72.5,0,0,0,24.269482915200207,68.31721744208268Z"><title>Mercado Pago</title></path><path fill="#063974" display="" d="M-92.53135054310465,109.02728634002173A143,143,0,0,1,-0.9999920729478798,-142.9965035091909L-0.9999920729479354,-72.49310322957655A72.5,72.5,0,0,0,-47.28756066842147,54.955769542700054Z"><title>Tarjeta de Crédito</title></path><path fill="#c2ede4" display="" d="M0.999992072947919,-215.49767983867955A215.5,215.5,0,0,1,65.2446348089657,-205.38594798243795L43.58819581995624,-138.2934169986451A145,145,0,0,0,0.999992072947915,-144.99655173780528Z"><title>Supermercado</title></path><path fill="#c2ede4" display="" d="M67.14792347810041,-204.7715956195565A215.5,215.5,0,0,1,80.1058471452328,-200.0582496503071L53.5956819188562,-134.731224590489A145,145,0,0,0,45.491484489090965,-137.6790646357637Z"><title>Futbol</title></path><path fill="#50e3c2" display="" d="M81.95905173837397,-199.30620622084638A215.5,215.5,0,0,1,186.35043447549378,-108.23015093214408L125.22198078710018,-73.10578313481851A145,145,0,0,0,55.44888651199737,-133.9791811610283Z"><title>Supermercado</title></path>
            <!-- ... TODO: conserva todas tus <path> y <text> del SVG original ... -->
            </g>
            <!-- FIN: CONTENIDO SVG ORIGINAL COMPLETO -->
          </svg>
        </div>
      </article>

      <!-- 4) Power BI: reporte -->
      <article class="card col-12" aria-labelledby="t4">
        <div class="card-hd">
          <h2 id="t4">Reporte interactivo (Power BI)</h2>
          <span class="hint">Vista 16:9 responsiva</span>
        </div>
        <div class="card-bd">
          <div class="ratio ratio-16x9">
            <iframe class="embed" title="Tp 1"
              src="https://app.powerbi.com/view?r=eyJrIjoiMmZkNDI4NTktMmU2YS00ZjcxLTgyMDItNmQ0YTQzNTY1OGNkIiwidCI6ImExZjUwYTk3LTIxYzAtNDlhNy1hOWQ0LWYyNDRlYmI0MmRhNyIsImMiOjR9"
              allowfullscreen
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
        </div>
      </article>

    </section>

    <section id="fuentes" style="margin-top: 16px;">
      <div class="card col-12">
        <div class="card-hd"><h2 style="margin:0;">Fuentes & notas</h2></div>
        <div class="card-bd" style="padding:14px 16px;">
          <ul>
            <li>Flourish: <code>visualisation/25147256</code>.</li>
            <li>Datawrapper: <code>https://datawrapper.dwcdn.net/Ad1jv/1/</code> (auto-ajuste de altura por <em>postMessage</em>).</li>
            <li>SVG: gráfico estático incrustado y escalable.</li>
            <li>Power BI: <em>iframe</em> con relación 16:9, <code>allowfullscreen</code> y <code>loading="lazy"</code>.</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Hecho con ❤️ para una lectura clara sobre fondo claro. Última actualización: <span id="updated"></span>.
  </footer>

  <!-- Scripts de terceros requeridos por los embeds -->
  <script src="https://public.flourish.studio/resources/embed.js" defer></script>
  <script>
    // Auto-resize de Datawrapper (snippet oficial)
    (function(){
      window.addEventListener("message", function(event){
        if (void 0 !== event.data["datawrapper-height"]) {
          const iframes = document.querySelectorAll("iframe");
          for (const key in event.data["datawrapper-height"]) {
            for (let i=0; i<iframes.length; i++){
              if (iframes[i].contentWindow === event.source){
                iframes[i].style.height = event.data["datawrapper-height"][key] + "px";
              }
            }
          }
        }
      });
    })();

    // Fecha de actualización en el pie
    (function(){
      const el = document.getElementById('updated');
      try{
        const now = new Date();
        const opts = { year:'numeric', month:'long', day:'numeric' };
        el.textContent = now.toLocaleDateString('es-AR', opts);
      }catch{ el.textContent = ''; }
    })();
  </script>
</body>
</html>
