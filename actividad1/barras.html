<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TP · Presentación de Gráficos</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f7f9fc; --card:#fff; --text:#0f172a; --muted:#475569; --border:#e5e7eb;
    --accent:#4f46e5; --radius:16px; --gap:18px; --shadow:0 10px 28px rgba(15,23,42,.09);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial,sans-serif;line-height:1.55}
  header{padding:36px 16px 8px;text-align:center}
  h1{margin:0 0 6px;font-size:clamp(28px,4.5vw,44px);letter-spacing:-.02em}
  p.lead{margin:0 auto 8px;max-width:900px;color:var(--muted)}
  main{max-width:1200px;margin:18px auto 42px;padding:0 16px}
  .grid{display:grid;gap:22px;grid-template-columns:1fr}
  @media(min-width:990px){ .grid{grid-template-columns:repeat(2,1fr)} }
  .card{
    background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
    box-shadow:var(--shadow);padding:14px;display:flex;flex-direction:column;gap:10px;min-height:420px
  }
  .card h2{margin:4px 6px 0;font-size:18px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:0 6px}
  .btn{
    padding:9px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);
    cursor:pointer;font-weight:600
  }
  .btn:hover{outline:2px solid #e0e7ff}
  .embed{position:relative;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff;flex:1}
  .embed .inner{position:absolute;inset:0}
  .ratio-16x9{padding-top:56.25%}
  .ratio-3x2{padding-top:66.66%}
  .ratio-auto{padding-top:0;min-height:160px}
  .embed iframe{position:absolute;inset:0;width:100%;height:100%;border:0;display:block}

  /* RAWGraphs */
  .raw-stage{position:relative;overflow:auto;display:flex;justify-content:center;align-items:flex-start;padding:12px;min-height:360px}
  .raw-holder{transform-origin:0 0; display:inline-block}
  /* que el SVG escale al ancho del contenedor */
  #rawsvg{max-width:100%;height:auto;display:block}
  .hint{color:var(--muted);font-size:13px;margin:6px 6px 0}
  footer{color:var(--muted);text-align:center;padding:22px 16px 36px;font-size:13px}
</style>
</head>
<body>
  <header>
    <h1>Trabajo Práctico · Presentación</h1>
    <p class="lead">Todas las visualizaciones en una sola pantalla. Fondo claro para buena legibilidad.</p>
  </header>

  <main>
    <section class="grid">
      <!-- Flourish -->
      <article class="card" id="card-flourish">
        <h2>Flourish · Jerarquía</h2>
        <div class="toolbar">
          <button class="btn" data-fs="#card-flourish">Pantalla completa</button>
          <a class="btn" href="https://public.flourish.studio/visualisation/25147256/" target="_blank" rel="noopener">Abrir en Flourish</a>
        </div>
        <div class="embed ratio-3x2"><div class="inner">
          <div class="flourish-embed flourish-hierarchy" data-src="visualisation/25147256"></div>
        </div></div>
      </article>

      <!-- RAWGraphs (SVG inline) -->
      <article class="card" id="card-raw">
        <h2>RAWGraphs · Diagrama (SVG)</h2>
        <div class="toolbar">
          <button class="btn" data-fs="#card-raw">Pantalla completa</button>
          <label class="btn">Zoom
            <input id="rawZoom" type="range" min="50" max="200" value="100" style="vertical-align:middle;margin-left:6px">
          </label>
          <button class="btn" id="rawFit">Ajustar al ancho</button>
          <button class="btn" id="rawReset">Reset</button>
          <button class="btn" id="rawPng">Descargar PNG</button>
          <button class="btn" id="rawSvg">Descargar SVG</button>
        </div>
        <div class="embed raw-stage">
          <div class="raw-holder" id="rawHolder">
              <svg xmlns="http://www.w3.org/2000/svg" width="805" height="600"><rect width="805" height="600" x="0" y="0" fill="#FFFFFF" id="background"/><g transform="translate(402.5,300)" id="viz"><path fill="#c2ede4" display="" d="M0.9999920729479259,-142.9965035091909A143,143,0,0,1,52.84361439271072,-132.87796061768293L26.332594771015295,-67.5488301351363A72.5,72.5,0,0,0,0.9999920729479103,-72.49310322957655Z"><title>Efectivo</title></path><path fill="#50e3c2" display="" d="M54.69681898585192,-132.1259171882222A143,143,0,0,1,50.659888995779056,133.725747883253L26.14466721552847,67.62178921168287A72.5,72.5,0,0,0,28.185799364156466,-66.79678670567557Z"><title>Tarjeta de Débito</title></path><path fill="#d0021b" display="" d="M48.78470469545076,134.42117611365282A143,143,0,0,1,-90.99749294318329,110.31072603357893L-45.75370306850015,56.23920923625722A72.5,72.5,0,0,0,24.269482915200207,68.31721744208268Z"><title>Mercado Pago</title></path><path fill="#063974" display="" d="M-92.53135054310465,109.02728634002173A143,143,0,0,1,-0.9999920729478798,-142.9965035091909L-0.9999920729479354,-72.49310322957655A72.5,72.5,0,0,0,-47.28756066842147,54.955769542700054Z"><title>Tarjeta de Crédito</title></path><path fill="#c2ede4" display="" d="M0.999992072947919,-215.49767983867955A215.5,215.5,0,0,1,65.2446348089657,-205.38594798243795L43.58819581995624,-138.2934169986451A145,145,0,0,0,0.999992072947915,-144.99655173780528Z"><title>Supermercado</title></path><path fill="#c2ede4" display="" d="M67.14792347810041,-204.7715956195565A215.5,215.5,0,0,1,80.1058471452328,-200.0582496503071L53.5956819188562,-134.731224590489A145,145,0,0,0,45.491484489090965,-137.6790646357637Z"><title>Futbol</title></path><path fill="#50e3c2" display="" d="M81.95905173837397,-199.30620622084638A215.5,215.5,0,0,1,186.35043447549378,-108.23015093214408L125.22198078710018,-73.10578313481851A145,145,0,0,0,55.44888651199737,-133.9791811610283Z"><title>Supermercado</title></path><path fill="#50e3c2" display="" d="M187.34684659855589,-106.496051896665A215.5,215.5,0,0,1,214.05439645579497,-24.91917651017678L143.98912393889609,-17.091874891574015A145,145,0,0,0,126.21839291016227,-71.37168409933943Z"><title>Fiestas</title></path><path fill="#50e3c2" display="" d="M214.27644225228138,-22.931556765834998A215.5,215.5,0,0,1,189.12362438534618,103.30781528689153L127.40906156691241,69.22377503891795A145,145,0,0,0,144.21116973538253,-15.10425514723223Z"><title>Nafta</title></path><path fill="#50e3c2" display="" d="M188.15672439437742,105.0585411338759A215.5,215.5,0,0,1,152.60512969981437,152.1575643512436L102.91167356425466,102.14787048296353A145,145,0,0,0,126.44216157594367,70.97450088590234Z"><title>Salidas a comer</title></path><path fill="#50e3c2" display="" d="M151.18644892729463,153.56727405523137A215.5,215.5,0,0,1,96.53003605820952,192.67122810269512L65.24293163328805,129.4927020024453A145,145,0,0,0,101.49299279173489,103.55758018695131Z"><title>Ropa</title></path><path fill="#50e3c2" display="" d="M94.737780331737,193.55878429514777A215.5,215.5,0,0,1,75.86977121418879,201.70282054524336L51.35533950882133,135.60099226751143A145,145,0,0,0,63.45067590681553,130.38025819489798Z"><title>Padel</title></path><path fill="#d0021b" display="" d="M73.99458691386043,202.3982487756432A215.5,215.5,0,0,1,-42.86791379399952,211.19325738988502L-28.52315571198164,142.1669075004097A145,145,0,0,0,49.480155208493,136.29642049791124Z"><title>Ropa</title></path><path fill="#d0021b" display="" d="M-44.826061261235516,210.78632363558114A215.5,215.5,0,0,1,-75.3657853712799,201.8916749035734L-50.40353801738711,135.95765280163457A145,145,0,0,0,-30.48130317921764,141.75997374610583Z"><title>Salida a comer</title></path><path fill="#d0021b" display="" d="M-77.23620932662915,201.18354298712688A215.5,215.5,0,0,1,-137.52330552115058,165.91440696496576L-92.28097376021888,111.84463278077224A145,145,0,0,0,-52.273961972736366,135.24952088518802Z"><title>Salidas a comer</title></path><path fill="#063974" display="" d="M-139.05716312107185,164.63096727140862A215.5,215.5,0,0,1,-146.01491621174924,158.49256841781525L-98.00583901275701,106.86372405735051A145,145,0,0,0,-93.81483136014013,110.56119308721513Z"><title>Padel</title></path><path fill="#063974" display="" d="M-147.47952923246729,157.13064137007086A215.5,215.5,0,0,1,-194.475773921946,-92.8408496162123L-130.99437689017515,-62.172929986890196A145,145,0,0,0,-99.470452033475,105.50179700960618Z"><title>Salidas a comer</title></path><path fill="#063974" display="" d="M-193.60578283529995,-94.64169722025632A215.5,215.5,0,0,1,-189.97572855268345,-101.73235749198545L-127.98000996896003,-68.16243135587881A145,145,0,0,0,-130.12438580352912,-63.973777590934134Z"><title>Futbol</title></path><path fill="#063974" display="" d="M-189.02341301022798,-103.49105919819728A215.5,215.5,0,0,1,-118.06510887597874,-180.28000462087658L-79.71403992495908,-121.12254884554746A145,145,0,0,0,-127.0276944265046,-69.92113306209056Z"><title>Nafta</title></path><path fill="#063974" display="" d="M-116.38692333697706,-181.36795217499872A215.5,215.5,0,0,1,-61.046656174906325,-206.6725810790168L-41.38911974611247,-138.96740900888224A145,145,0,0,0,-78.03585438595748,-122.21049639966954Z"><title>Fiestas</title></path><path fill="#063974" display="" d="M-59.12598803266509,-207.230228343167A215.5,215.5,0,0,1,-0.9999920729479453,-215.49767983867955L-0.9999920729479006,-144.99655173780528A145,145,0,0,0,-39.4684516038713,-139.52505627303245Z"><title>Supermercado</title></path><path fill="#c2ede4" display="" d="M0.9999920729479248,-287.99826391118063A288,288,0,0,1,87.51526391701537,-274.3812649973302L65.858998595558,-207.2892720426947A217.5,217.5,0,0,0,0.9999920729479188,-217.49770117372285Z"><title>29827</title></path><path fill="#c2ede4" display="" d="M89.4185525861501,-273.7669126344488A288,288,0,0,1,107.36785719450143,-267.23798989189606L80.85790455873138,-201.9114887032709A217.5,217.5,0,0,0,67.76228726469272,-206.67491967981326Z"><title>7000</title></path><path fill="#50e3c2" display="" d="M109.22106178764261,-266.4859464624353A288,288,0,0,1,189.3986076212032,-216.96121181250234L142.85090544318197,-164.01179474069264A217.5,217.5,0,0,0,82.71110915187255,-201.15944527381018Z"><title>32064</title></path><path fill="#50e3c2" display="" d="M190.9006948466968,-215.6407306309463A288,288,0,0,1,249.21252924249103,-144.35066771082336L188.0845657560609,-109.2265815832117A217.5,217.5,0,0,0,144.35299266867554,-162.6913135591366Z"><title>31345</title></path><path fill="#50e3c2" display="" d="M250.20894136555313,-142.61656867534433A288,288,0,0,1,271.06245683987316,-97.30952929663107L204.62578631794727,-73.71931615093685A217.5,217.5,0,0,0,189.08097787912297,-107.49248254773265Z"><title>17228</title></path><path fill="#50e3c2" display="" d="M271.7316720979895,-95.42483103904738A288,288,0,0,1,286.10676380807183,-32.968465285363L216.04205315937162,-25.141226435542873A217.5,217.5,0,0,0,205.29500157606356,-71.83461789335317Z"><title>21966</title></path><path fill="#50e3c2" display="" d="M286.3288096045583,-30.98084554102122A288,288,0,0,1,252.588450702927,138.3585001779617L190.87438278658948,104.27473325709596A217.5,217.5,0,0,0,216.26409895585806,-23.153606691201087Z"><title>58832</title></path><path fill="#50e3c2" display="" d="M251.62155071195824,140.1092260249461A288,288,0,0,1,230.52888760587535,172.6280162059383L174.24395555599796,130.17409094055319A217.5,217.5,0,0,0,189.90748279562072,106.02545910408035Z"><title>13530</title></path><path fill="#50e3c2" display="" d="M229.32454009196954,174.22472646443342A288,288,0,0,1,203.70792325021452,203.58556433373343L154.014865616961,153.57627150373668A217.5,217.5,0,0,0,173.03960804209217,131.7708011990483Z"><title>13598</title></path><path fill="#50e3c2" display="" d="M202.28924247769476,204.9952740377212A288,288,0,0,1,128.70446228155402,257.6415366139863L97.41760875452208,194.46351715566306A217.5,217.5,0,0,0,152.59618484444124,154.98598120772448Z"><title>30800</title></path><path fill="#50e3c2" display="" d="M126.9122065550815,258.52909280643894A288,288,0,0,1,101.07944749485158,269.6793379073294L76.5652123758826,203.57803971410078A217.5,217.5,0,0,0,95.62535302804956,195.35107334811573Z"><title>5000</title></path><path fill="#d0021b" display="" d="M99.2042631945232,270.37476613772924A288,288,0,0,1,-57.61949816350026,282.17723762094346L-43.274855115123074,213.15144126832712A217.5,217.5,0,0,0,74.69002807555425,204.27346794450062Z"><title>53500</title></path><path fill="#d0021b" display="" d="M-59.57764563073626,281.7703038666396A288,288,0,0,1,-101.03597763160809,269.6956270020431L-76.07393045524196,203.76213363893453A217.5,217.5,0,0,0,-45.23300258235907,212.74450751402324Z"><title>15000</title></path><path fill="#d0021b" display="" d="M-102.90640158695736,268.9874950855966A288,288,0,0,1,-139.23813567470765,252.10462426110257L-104.93945213229229,190.50974092201778A217.5,217.5,0,0,0,-77.94435441059122,203.05400172248798Z"><title>13963</title></path><path fill="#d0021b" display="" d="M-140.98548045272344,251.13162744169585A288,288,0,0,1,-184.04873803304167,221.5176336738112L-138.80676907991102,167.44829308654138A217.5,217.5,0,0,0,-106.68679691030799,189.53674410261115Z"><title>18023</title></path><path fill="#063974" display="" d="M-185.58259563296292,220.23419398025408A288,288,0,0,1,-195.3855607882233,211.5856390104761L-147.37686858414733,159.95720867260397A217.5,217.5,0,0,0,-140.34062667983218,166.16485339298433Z"><title>5000</title></path><path fill="#063974" display="" d="M-196.85017380894135,210.22371196273167A288,288,0,0,1,-237.77193095288777,162.50695016193978L-179.42910374603775,122.92862453022737A217.5,217.5,0,0,0,-148.84148160486532,158.59528162485964Z"><title>21556</title></path><path fill="#063974" display="" d="M-238.89470247003584,160.85186082776A288,288,0,0,1,-286.10192917445187,33.01039416088401L-216.03836636775276,25.17288734238957A217.5,217.5,0,0,0,-180.55187526318576,121.27353519604767Z"><title>46300</title></path><path fill="#063974" display="" d="M-286.32426625619564,31.02280697891783A288,288,0,0,1,-287.0745714781351,-23.06925249428547L-216.82057955522237,-17.178075600529187A217.5,217.5,0,0,0,-216.2607034494965,23.185300160423484Z"><title>18634</title></path><path fill="#063974" display="" d="M-286.9074485513004,-25.06224183473885A288,288,0,0,1,-259.7575429733074,-124.37853057690606L-196.276655012249,-93.71085688010002A217.5,217.5,0,0,0,-216.6534566283876,-19.171064940982465Z"><title>35000</title></path><path fill="#063974" display="" d="M-258.88755188666136,-126.17937818095007A288,288,0,0,1,-253.72968438844288,-136.2543476742712L-191.73446296146304,-102.68469074248291A217.5,217.5,0,0,0,-195.406663925603,-95.51170448414395Z"><title>4418</title></path><path fill="#063974" display="" d="M-252.77736884598738,-138.01304938048304A288,288,0,0,1,-157.50383806589082,-241.11520274448404L-119.15307666018226,-181.95822136527036A217.5,217.5,0,0,0,-190.78214741900763,-104.44339244869465Z"><title>47702</title></path><path fill="#063974" display="" d="M-155.82565252688917,-242.20315029860615A288,288,0,0,1,-134.8696000558404,-254.46844790813978L-102.07087219521475,-192.06193545132294A217.5,217.5,0,0,0,-117.47489112118052,-183.04616891939253Z"><title>8720</title></path><path fill="#063974" display="" d="M-133.09923070461863,-255.39889347027074A288,288,0,0,1,-81.2616925992149,-276.2979140636257L-61.604313808351954,-208.5932849355465A217.5,217.5,0,0,0,-100.30050284399289,-192.99238101345395Z"><title>19232</title></path><path fill="#063974" display="" d="M-79.34102445697367,-276.85556132777594A288,288,0,0,1,-0.99999207294796,-287.99826391118063L-0.9999920729479937,-217.49770117372285A217.5,217.5,0,0,0,-59.68364566611064,-209.15093219969677Z"><title>26994</title></path></g><g id="labels" transform="translate(402.5,300)" text-anchor="middle"><text transform="rotate(90) translate(36.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;"/></text><text transform="rotate(-78.95617028082475) translate(108.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Efectivo</tspan></text><text transform="rotate(0.8699636140692348) translate(108.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Tarjeta de Débito</tspan></text><text transform="rotate(99.78641591917793) translate(108.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Mercado Pago</tspan></text><text transform="rotate(199.96028202428397) translate(108.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Tarjeta de Crédito</tspan></text><text transform="rotate(-81.05535859467673) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Supermercado</tspan></text><text transform="rotate(-70.01152887550147) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Futbol</tspan></text><text transform="rotate(-48.89699316264378) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Supermercado</tspan></text><text transform="rotate(-18.127990510336005) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Fiestas</tspan></text><text transform="rotate(11.26844286875739) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Nafta</tspan></text><text transform="rotate(37.04647536285968) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Salidas a comer</tspan></text><text transform="rotate(54.41815831211929) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Ropa</tspan></text><text transform="rotate(66.653427341428) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Padel</tspan></text><text transform="rotate(85.69606418851379) translate(181.25,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Ropa</tspan></text><text transform="rotate(106.23812125977958) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Salida a comer</tspan></text><text transform="rotate(120.32847299044371) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Salidas a comer</tspan></text><text transform="rotate(131.41998427274788) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Padel</tspan></text><text transform="rotate(169.35231710405316) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Salidas a comer</tspan></text><text transform="rotate(207.11011742126374) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Futbol</tspan></text><text transform="rotate(222.7400738381159) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Nafta</tspan></text><text transform="rotate(245.42750136613847) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Fiestas</tspan></text><text transform="rotate(261.90493009369715) translate(181.25,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">Supermercado</tspan></text><text transform="rotate(-81.05535859467673) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">29827</tspan></text><text transform="rotate(-70.01152887550147) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">7000</tspan></text><text transform="rotate(-58.2968585480281) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">32064</tspan></text><text transform="rotate(-39.28151114902237) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">31345</tspan></text><text transform="rotate(-24.71524343920352) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">17228</tspan></text><text transform="rotate(-12.961588185901462) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">21966</tspan></text><text transform="rotate(11.26844286875739) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">58832</tspan></text><text transform="rotate(32.96865212117979) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">13530</tspan></text><text transform="rotate(41.103906489490726) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">13598</tspan></text><text transform="rotate(54.41815831211929) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">30800</tspan></text><text transform="rotate(66.653427341428) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">5000</tspan></text><text transform="rotate(85.69606418851379) translate(253.75,0) rotate(0)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">53500</tspan></text><text transform="rotate(106.23812125977958) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">15000</tspan></text><text transform="rotate(114.92366285036456) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">13963</tspan></text><text transform="rotate(124.51575390848873) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">18023</tspan></text><text transform="rotate(131.41998427274788) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">5000</tspan></text><text transform="rotate(139.3837049674126) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">21556</tspan></text><text transform="rotate(159.73263671380403) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">46300</tspan></text><text transform="rotate(179.20530728118462) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">18634</tspan></text><text transform="rotate(195.28928814191846) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">35000</tspan></text><text transform="rotate(207.11011742126374) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">4418</tspan></text><text transform="rotate(222.7400738381159) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">47702</tspan></text><text transform="rotate(239.6601314158525) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">8720</tspan></text><text transform="rotate(248.04249023710838) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">19232</tspan></text><text transform="rotate(261.90493009369715) translate(253.75,0) rotate(180)"><tspan x="0" y="4" style="font-family: Arial, sans-serif; font-size: 10px; fill: black; font-weight: bold;">26994</tspan></text></g></svg>

          </div>
        </div>
        <p class="hint">Si se veía “cortado”, este archivo lo corrige automáticamente (viewBox y escalado).</p>
      </article>

      <!-- Datawrapper -->
      <article class="card" id="card-dw">
        <h2>Datawrapper · Gastos</h2>
        <div class="toolbar">
          <button class="btn" data-fs="#card-dw">Pantalla completa</button>
        </div>
        <div class="embed ratio-auto"><div class="inner">
          <iframe title="Gastos totales" aria-label="Bar Chart" id="datawrapper-chart-Ad1jv"
                  src="https://datawrapper.dwcdn.net/Ad1jv/1/" scrolling="no"></iframe>
        </div></div>
      </article>

      <!-- Power BI -->
      <article class="card" id="card-pbi">
        <h2>Power BI · Dashboard</h2>
        <div class="toolbar">
          <button class="btn" data-fs="#card-pbi">Pantalla completa</button>
        </div>
        <div class="embed ratio-16x9"><div class="inner">
          <iframe title="TP"
                  src="https://app.powerbi.com/view?r=eyJrIjoiMmZkNDI4NTktMmU2YS00ZjcxLTgyMDItNmQ0YTQzNTY1OGNkIiwidCI6ImExZjUwYTk3LTIxYzAtNDlhNy1hOWQ0LWYyNDRlYmI0MmRhNyIsImMiOjR9"
                  allowfullscreen></iframe>
        </div></div>
      </article>
    </section>
  </main>

  <footer>© 2025 • InfoVis • GitHub Pages</footer>

  <!-- Scripts de proveedores -->
  <script src="https://public.flourish.studio/resources/embed.js" defer></script>

  <!-- Fullscreen por tarjeta -->
  <script>
    document.querySelectorAll('[data-fs]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const sel = btn.getAttribute('data-fs');
        const el = document.querySelector(sel);
        if (el && el.requestFullscreen) el.requestFullscreen();
      });
    });
  </script>

  <!-- Auto-resize Datawrapper -->
  <script>
    (function(){
      "use strict";
      window.addEventListener("message", function(e){
        if (e.data["datawrapper-height"] !== undefined) {
          var iframes = document.querySelectorAll("iframe");
          for (var id in e.data["datawrapper-height"]) {
            for (var i=0;i<iframes.length;i++){
              if (iframes[i].contentWindow === e.source) {
                iframes[i].style.height = e.data["datawrapper-height"][id] + "px";
              }
            }
          }
        }
      });
    })();
  </script>

  <!-- FIX RAWGRAPHS: viewBox, escalado, fit, export -->
  <script>
    (function(){
      const holder = document.getElementById('rawHolder');
      const zoom   = document.getElementById('rawZoom');
      const reset  = document.getElementById('rawReset');
      const fitBtn = document.getElementById('rawFit');
      const btnPNG = document.getElementById('rawPng');
      const btnSVG = document.getElementById('rawSvg');

      // Aplica zoom (escala el contenedor del SVG)
      const applyZoom = v => holder.style.transform = `scale(${v/100})`;

      // Asegura que el SVG sea responsive y que no quede "cortado"
      function makeResponsive(svg){
        if (!svg) return;

        // 1) Si NO hay viewBox, lo creamos a partir de width/height
        if (!svg.getAttribute('viewBox')) {
          const w = parseFloat(svg.getAttribute('width'))  || 1600;
          const h = parseFloat(svg.getAttribute('height')) || 900;
          svg.setAttribute('viewBox', `0 0 ${w} ${h}`);
        }

        // 2) Quitamos width/height fijos para permitir escalar
        svg.removeAttribute('width');
        svg.removeAttribute('height');

        // 3) Ajustamos el viewBox a lo que realmente ocupa el contenido (BBox)
        //    Esto corrige cuando el gráfico quedó desplazado/recortado.
        try {
          const bbox = svg.getBBox(); // puede fallar si el SVG está vacío
          if (bbox && isFinite(bbox.width) && bbox.width > 0 && isFinite(bbox.height) && bbox.height > 0) {
            const pad = Math.max(bbox.width, bbox.height) * 0.02; // 2% de margen
            const vb = [bbox.x - pad, bbox.y - pad, bbox.width + 2*pad, bbox.height + 2*pad];
            svg.setAttribute('viewBox', vb.join(' '));
          }
        } catch(e) { /* si falla getBBox, dejamos el viewBox anterior */ }

        svg.setAttribute('preserveAspectRatio','xMidYMid meet');
        // que ocupe el ancho del contenedor
        svg.style.maxWidth = '100%';
        svg.style.height = 'auto';
        svg.style.display = 'block';
      }

      // Ajustar el SVG al ancho del contenedor visible (sin scroll horizontal)
      function fitToWidth(){
        // reset zoom y centra
        zoom.value = 100; applyZoom(100);
        // nada más: el viewBox + max-width ya se ocupan del ajuste
        // dejamos esta acción para que el usuario "vuelva" fácilmente
      }

      function init(){
        const svg = document.getElementById('rawsvg');
        if (!svg) return;
        makeResponsive(svg);
        applyZoom(+zoom.value);
      }

      // Eventos
      zoom.addEventListener('input', e=> applyZoom(+e.target.value));
      reset.addEventListener('click', ()=> { zoom.value=100; applyZoom(100); });
      fitBtn.addEventListener('click', fitToWidth);

      // Exportar SVG
      btnSVG.addEventListener('click', ()=>{
        const svg = document.getElementById('rawsvg');
        if (!svg) { alert('Pegá tu SVG (root con id="rawsvg")'); return; }
        const xml = new XMLSerializer().serializeToString(svg);
        const blob = new Blob([xml], {type:"image/svg+xml;charset=utf-8"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = 'rawgraphs.svg'; a.click();
        URL.revokeObjectURL(url);
      });

      // Exportar PNG
      btnPNG.addEventListener('click', ()=>{
        const svg = document.getElementById('rawsvg');
        if (!svg) { alert('Pegá tu SVG (root con id="rawsvg")'); return; }
        const xml = new XMLSerializer().serializeToString(svg);
        const img = new Image();
        img.onload = function(){
          // usa el viewBox actual
          const vb = (svg.getAttribute('viewBox') || '0 0 1600 900').split(/\s+/).map(Number);
          const w = Math.max(1, Math.round(vb[2] || 1600));
          const h = Math.max(1, Math.round(vb[3] || 900));
          const canvas = document.createElement('canvas');
          canvas.width = w; canvas.height = h;
          const ctx = canvas.getContext('2d');
          ctx.fillStyle = '#ffffff';
          ctx.fillRect(0,0,w,h);
          ctx.drawImage(img, 0, 0, w, h);
          const a = document.createElement('a');
          a.download = 'rawgraphs.png';
          a.href = canvas.toDataURL('image/png');
          a.click();
        };
        img.onerror = ()=> alert('No se pudo convertir el SVG. Verificá que esté pegado correctamente.');
        img.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(xml);
      });

      // Inicializar cuando el DOM esté listo
      window.addEventListener('DOMContentLoaded', init);
    })();
  </script>
</body>
</html>


